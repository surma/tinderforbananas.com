customElements.define('tinderforbananas-item',class extends HTMLElement{static get observedAttributes(){return['inmovable']}constructor(){super(),this._dragging=!1,this.startX=0,this.startY=0,this._startDrag=this._startDrag.bind(this),this._stopDrag=this._stopDrag.bind(this),this._drag=this._drag.bind(this),this._data={},this._selected=0}connectedCallback(){this.addEventListener('mousedown',this._startDrag),document.addEventListener('mouseup',this._stopDrag),document.addEventListener('mousemove',this._drag),this.addEventListener('touchstart',this._startDrag),document.addEventListener('touchend',this._stopDrag),document.addEventListener('touchmove',this._drag),this._actions=Array.from(this.querySelectorAll('.action')),this.onResize()}onResize(){this._gBCR=this.getBoundingClientRect(),this._rotationLerp=lerp(0,this._gBCR.width/2,0,10,{noClamp:!0}),this._nopeOpacityLerp=lerp(0,-this._gBCR.width/3,0,1),this._likeOpacityLerp=lerp(0,this._gBCR.width/3,0,1),this._superlikeOpacityLerp=lerp(-this._gBCR.height/8,-this._gBCR.height/8-this._gBCR.height/3,0,1)}get data(){return this._data}set data(b){this._data=b,this._updateBindings()}get selected(){return this._selected}set selected(b){this._selected=b,this._updateBindings()}_updateBindings(){this.querySelector('.item__details__name').textContent=`${this.data.name}`,this.querySelector('.item__details__age').textContent=`${this.data.age}`,this.querySelector('.item__details__job').textContent=`${this.data.job}`,this.querySelector('picture').style.backgroundImage=`url('${this.data.images[this.selected]}')`}attributeChangedCallback(b,c,d){this._inmovable=null!==d}_startDrag(b){this._inmovable||(this._dragging=!0,this.startX=b.clientX||b.touches[0].clientX,this.startY=b.clientY||b.touches[0].clientY,b.preventDefault())}_stopDrag(b){if(!this._inmovable&&this._dragging){this._dragging=!1;const c=(b.clientX||b.changedTouches[0].clientX)-this.startX,d=(b.clientY||b.changedTouches[0].clientY)-this.startY;return this._actions.forEach(e=>e.style.opacity=0),b.preventDefault(),1<=this._superlikeOpacityLerp(d)?this.superlike():1<=this._nopeOpacityLerp(c)?this.nope():1<=this._likeOpacityLerp(c)?this.like():0==c&&0==d?this.dispatchEvent(new CustomEvent('details',{detail:this.data,bubbles:!0})):this._animate('initial')}}_drag(b){if(!this._inmovable&&this._dragging){const c=(b.clientX||b.touches[0].clientX)-this.startX,d=(b.clientY||b.touches[0].clientY)-this.startY;this.style.transform=`rotate(${this._rotationLerp(c)}deg) translate(${c}px, ${d}px)`,this._actions.find(e=>e.classList.contains('action--nope')).style.opacity=this._nopeOpacityLerp(c),this._actions.find(e=>e.classList.contains('action--like')).style.opacity=this._likeOpacityLerp(c),this._actions.find(e=>e.classList.contains('action--superlike')).style.opacity=this._superlikeOpacityLerp(d),b.preventDefault()}}_animate(b,c={}){return this.style.transition='transform 0.3s ease-in-out',requestAnimationFramePromise().then(()=>{return this.style.transform=b,transitionEndPromise(this)}).then(()=>{this.style.transition='initial'})}like(){return this._animate('translateX(200%)',{next:!0}).then(()=>this.dispatchEvent(new CustomEvent('swipe',{detail:'like'})))}nope(){return this._animate('translateX(-200%)',{next:!0}).then(()=>this.dispatchEvent(new CustomEvent('swipe',{detail:'nope'})))}superlike(){return this._animate('translateY(-200%)',{next:!0}).then(()=>this.dispatchEvent(new CustomEvent('swipe',{detail:'superlike'})))}});